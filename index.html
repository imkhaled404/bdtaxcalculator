<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>বাংলাদেশ আয়কর ক্যালকুলেটর ২০২৪-২৫ | সম্পূর্ণ ফ্রি</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { 
            font-family: 'Noto Sans Bengali', 'Inter', sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-attachment: fixed;
            min-height: 100vh;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .glass-card-solid {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .modern-input {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .modern-input:focus {
            background: rgba(255, 255, 255, 1);
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1), 0 10px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .result-card-gradient {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            box-shadow: 0 20px 40px rgba(79, 172, 254, 0.3);
        }
        
        .breakdown-card-gradient {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            box-shadow: 0 20px 40px rgba(67, 233, 123, 0.3);
        }
        
        .analysis-card-gradient {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            box-shadow: 0 20px 40px rgba(250, 112, 154, 0.3);
        }
        
        .tips-card-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
        }
        
        .floating-action {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .floating-action:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.6);
        }
        
        .taxpayer-card {
            transition: all 0.3s ease;
            cursor: pointer;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .taxpayer-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }
        
        .taxpayer-card.selected {
            background: rgba(255, 255, 255, 0.2);
            border-color: #667eea !important;
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 25px 50px rgba(102, 126, 234, 0.3);
        }
        
        .animate-slideInUp {
            animation: slideInUp 0.6s ease-out forwards;
        }
        
        .animate-fadeInScale {
            animation: fadeInScale 0.5s ease-out forwards;
        }
        
        .animate-pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.4);
            }
            50% {
                box-shadow: 0 0 0 20px rgba(102, 126, 234, 0);
            }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(67, 233, 123, 0.95);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateX(400px);
            transition: all 0.3s ease;
            z-index: 1001;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .feature-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 15px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            backdrop-filter: blur(10px);
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .feature-icon:hover {
            transform: scale(1.1) rotate(5deg);
        }
        
        .progress-bar-container {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            border-radius: 4px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }
        
        .tooltip-enhanced {
            position: relative;
            display: inline-block;
        }
        
        .tooltip-enhanced .tooltip-text {
            visibility: hidden;
            width: 250px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            text-align: center;
            border-radius: 10px;
            padding: 10px 15px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: all 0.3s ease;
            font-size: 14px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tooltip-enhanced .tooltip-text::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: rgba(0, 0, 0, 0.9) transparent transparent transparent;
        }
        
        .tooltip-enhanced:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
            transform: translateY(-5px);
        }
        
        @media (max-width: 768px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .floating-action {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }
            
            .notification {
                top: 10px;
                right: 10px;
                left: 10px;
                transform: translateY(-100px);
            }
            
            .notification.show {
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Floating Action Button -->
    <button class="floating-action animate-pulse-glow" onclick="scrollToTop()" title="শীর্ষে যান">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Notification Container -->
    <div id="notification" class="notification">
        <i class="fas fa-check-circle mr-2"></i>
        <span id="notificationText">সফলভাবে গণনা সম্পন্ন!</span>
    </div>

    <!-- Header -->
    <header class="text-white py-16 px-4 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-purple-600/20 to-blue-600/20"></div>
        <div class="container mx-auto text-center relative z-10">
            <div class="animate-fadeInScale">
                <h1 class="text-5xl md:text-7xl font-bold mb-4 gradient-text">
                    🇧🇩 আয়কর ক্যালকুলেটর
                </h1>
                <p class="text-xl md:text-2xl mb-6 opacity-90">২০২৪-২৫ অর্থবছর | NBR নিয়মানুযায়ী</p>
                <div class="flex flex-wrap justify-center gap-6 text-sm mb-8">
                    <span class="bg-white/20 backdrop-blur-10 px-4 py-2 rounded-full">
                        ✅ সম্পূর্ণ ফ্রি
                    </span>
                    <span class="bg-white/20 backdrop-blur-10 px-4 py-2 rounded-full">
                        🔒 সম্পূর্ণ নিরাপদ
                    </span>
                    <span class="bg-white/20 backdrop-blur-10 px-4 py-2 rounded-full">
                        ⚡ তাৎক্ষণিক ফলাফল
                    </span>
                    <span class="bg-white/20 backdrop-blur-10 px-4 py-2 rounded-full">
                        📱 মোবাইল ফ্রেন্ডলি
                    </span>
                </div>
                <div class="stats-grid max-w-4xl mx-auto">
                    <div class="stat-card">
                        <div class="feature-icon mx-auto">
                            <i class="fas fa-users text-2xl text-blue-400"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white">১০,০০০+</h3>
                        <p class="text-white/80">সন্তুষ্ট ব্যবহারকারী</p>
                    </div>
                    <div class="stat-card">
                        <div class="feature-icon mx-auto">
                            <i class="fas fa-calculator text-2xl text-green-400"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white">৫০,০০০+</h3>
                        <p class="text-white/80">সফল গণনা</p>
                    </div>
                    <div class="stat-card">
                        <div class="feature-icon mx-auto">
                            <i class="fas fa-clock text-2xl text-purple-400"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white">২৪/৭</h3>
                        <p class="text-white/80">সেবা প্রদান</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Tax Type Selection -->
        <div class="glass-card-solid rounded-3xl p-8 mb-8 animate-slideInUp">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold gradient-text mb-4">করদাতার ধরন নির্বাচন করুন</h2>
                <p class="text-gray-600">আপনার উপযুক্ত ক্যাটেগরি নির্বাচন করুন সঠিক গণনার জন্য</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                <label class="cursor-pointer">
                    <input type="radio" name="taxpayerType" value="general" class="sr-only" onchange="updateTaxpayerType()">
                    <div class="taxpayer-card p-8 border-2 border-white/30 rounded-3xl hover:border-blue-500/50 transition-all duration-300">
                        <div class="text-center">
                            <div class="feature-icon mx-auto mb-4">
                                <i class="fas fa-user-tie text-2xl text-blue-500"></i>
                            </div>
                            <h3 class="font-bold text-xl mb-2">সাধারণ করদাতা</h3>
                            <p class="text-sm text-gray-600 mb-3">সাধারণ চাকরিজীবী ও ব্যবসায়ী</p>
                            <div class="bg-blue-50 rounded-xl p-3">
                                <p class="text-lg font-semibold text-blue-700">৳ ৩,৫০,০০০</p>
                                <p class="text-xs text-blue-600">করমুক্ত সীমা</p>
                            </div>
                        </div>
                    </div>
                </label>
                
                <label class="cursor-pointer">
                    <input type="radio" name="taxpayerType" value="female" class="sr-only" onchange="updateTaxpayerType()">
                    <div class="taxpayer-card p-8 border-2 border-white/30 rounded-3xl hover:border-pink-500/50 transition-all duration-300">
                        <div class="text-center">
                            <div class="feature-icon mx-auto mb-4">
                                <i class="fas fa-user-graduate text-2xl text-pink-500"></i>
                            </div>
                            <h3 class="font-bold text-xl mb-2">মহিলা করদাতা</h3>
                            <p class="text-sm text-gray-600 mb-3">সকল বয়সের মহিলা</p>
                            <div class="bg-pink-50 rounded-xl p-3">
                                <p class="text-lg font-semibold text-pink-700">৳ ৪,০০,০০০</p>
                                <p class="text-xs text-pink-600">করমুক্ত সীমা</p>
                            </div>
                        </div>
                    </div>
                </label>
                
                <label class="cursor-pointer">
                    <input type="radio" name="taxpayerType" value="senior" class="sr-only" onchange="updateTaxpayerType()">
                    <div class="taxpayer-card p-8 border-2 border-white/30 rounded-3xl hover:border-green-500/50 transition-all duration-300">
                        <div class="text-center">
                            <div class="feature-icon mx-auto mb-4">
                                <i class="fas fa-user-friends text-2xl text-green-500"></i>
                            </div>
                            <h3 class="font-bold text-xl mb-2">প্রবীণ করদাতা</h3>
                            <p class="text-sm text-gray-600 mb-3">৬৫ বছর ও তদূর্ধ্ব</p>
                            <div class="bg-green-50 rounded-xl p-3">
                                <p class="text-lg font-semibold text-green-700">৳ ৪,৫০,০০০</p>
                                <p class="text-xs text-green-600">করমুক্ত সীমা</p>
                            </div>
                        </div>
                    </div>
                </label>
            </div>
        </div>

        <!-- Income Input Section -->
        <div class="glass-card-solid rounded-3xl p-8 mb-8 animate-slideInUp">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold gradient-text mb-4">আয়ের বিবরণ</h2>
                <p class="text-gray-600">সব পরিমাণ বার্ষিক হিসাবে প্রদান করুন</p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Salary Income -->
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                            <div class="feature-icon mr-3">
                                <i class="fas fa-briefcase text-blue-600"></i>
                            </div>
                            বেতন ও ভাতাদি
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-money-bill-wave text-green-500 mr-2"></i>
                                    মূল বেতন (বার্ষিক)
                                </label>
                                <input type="number" id="basicSalary" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-home text-blue-500 mr-2"></i>
                                    বাড়ি ভাড়া ভাতা
                                    <span class="tooltip-enhanced ml-1">
                                        <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                        <span class="tooltip-text">মূল বেতনের ৫০% বা প্রকৃত পরিমাণ, যেটি কম</span>
                                    </span>
                                </label>
                                <input type="number" id="houseRent" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-plus-circle text-green-500 mr-2"></i>
                                    চিকিৎসা ভাতা
                                    <span class="tooltip-enhanced ml-1">
                                        <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                        <span class="tooltip-text">সর্বোচ্চ ১,২০,০০০ টাকা বা মূল বেতনের ১০%, যেটি বেশি</span>
                                    </span>
                                </label>
                                <input type="number" id="medicalAllowance" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-car text-purple-500 mr-2"></i>
                                    যাতায়াত ভাতা
                                    <span class="tooltip-enhanced ml-1">
                                        <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                        <span class="tooltip-text">সর্বোচ্চ ৩০,০০০ টাকা করমুক্ত</span>
                                    </span>
                                </label>
                                <input type="number" id="conveyanceAllowance" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-gift text-red-500 mr-2"></i>
                                    বোনাস ও উৎসব ভাতা (বার্ষিক)
                                </label>
                                <input type="number" id="bonus" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-plus text-gray-500 mr-2"></i>
                                    অন্যান্য ভাতা
                                </label>
                                <input type="number" id="otherAllowance" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other Income & Investments -->
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                            <div class="feature-icon mr-3">
                                <i class="fas fa-chart-line text-green-600"></i>
                            </div>
                            অন্যান্য আয় ও বিনিয়োগ
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-store text-orange-500 mr-2"></i>
                                    ব্যবসায়িক আয়
                                </label>
                                <input type="number" id="businessIncome" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-building text-indigo-500 mr-2"></i>
                                    সম্পত্তি আয় (ভাড়া)
                                </label>
                                <input type="number" id="propertyIncome" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-university text-blue-500 mr-2"></i>
                                    ব্যাংক সুদ ও বিনিয়োগ আয়
                                </label>
                                <input type="number" id="bankInterest" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-piggy-bank text-green-500 mr-2"></i>
                                    DPS/সঞ্চয়পত্র বিনিয়োগ
                                    <span class="tooltip-enhanced ml-1">
                                        <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                        <span class="tooltip-text">সর্বোচ্চ ১,২৫,০০০ টাকা কর ছাড় পাবেন</span>
                                    </span>
                                </label>
                                <input type="number" id="dpsInvestment" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                                <div class="mt-1 text-xs text-green-600">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    কর সাশ্রয়ের সুবিধা
                                </div>
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-shield-alt text-blue-500 mr-2"></i>
                                    জীবন বীমা প্রিমিয়াম
                                    <span class="tooltip-enhanced ml-1">
                                        <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                        <span class="tooltip-text">সর্বোচ্চ ১,০০,০০০ টাকা কর ছাড় পাবেন</span>
                                    </span>
                                </label>
                                <input type="number" id="lifeInsurance" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                                <div class="mt-1 text-xs text-blue-600">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    কর সাশ্রয়ের সুবিধা
                                </div>
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-wallet text-purple-500 mr-2"></i>
                                    প্রভিডেন্ট ফান্ড
                                    <span class="tooltip-enhanced ml-1">
                                        <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                        <span class="tooltip-text">সর্বোচ্চ ১,২৫,০০০ টাকা কর ছাড় পাবেন</span>
                                    </span>
                                </label>
                                <input type="number" id="providentFund" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                                <div class="mt-1 text-xs text-purple-600">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    কর সাশ্রয়ের সুবিধা
                                </div>
                            </div>
                            
                            <div class="relative">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-hand-holding-heart text-red-500 mr-2"></i>
                                    দান (আয়ের ২০% পর্যন্ত)
                                    <span class="tooltip-enhanced ml-1">
                                        <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                        <span class="tooltip-text">অনুমোদিত দাতব্য প্রতিষ্ঠানে দানের কর ছাড়</span>
                                    </span>
                                </label>
                                <input type="number" id="donation" placeholder="৳ ০" 
                                    class="w-full px-4 py-3 modern-input rounded-xl text-lg"
                                    oninput="calculateTax()">
                                <div class="mt-1 text-xs text-red-600">
                                    <i class="fas fa-heart mr-1"></i>
                                    কর সাশ্রয়ের সুবিধা
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="mt-8 flex flex-wrap justify-center gap-4">
                <button onclick="clearAll()" 
                    class="px-6 py-3 bg-red-500/20 text-red-700 rounded-xl font-semibold hover:bg-red-500/30 transition-all duration-300">
                    <i class="fas fa-trash-alt mr-2"></i>সব মুছুন
                </button>
                <button onclick="fillSampleData()" 
                    class="px-6 py-3 bg-blue-500/20 text-blue-700 rounded-xl font-semibold hover:bg-blue-500/30 transition-all duration-300">
                    <i class="fas fa-magic mr-2"></i>নমুনা ডেটা
                </button>
                <button onclick="saveData()" 
                    class="px-6 py-3 bg-green-500/20 text-green-700 rounded-xl font-semibold hover:bg-green-500/30 transition-all duration-300">
                    <i class="fas fa-save mr-2"></i>সংরক্ষণ
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="hidden">
            <!-- Tax Summary -->
            <div class="result-card-gradient text-white rounded-3xl p-8 mb-8 animate-fadeInScale">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold mb-4">
                        <i class="fas fa-gem mr-3"></i>আয়কর সারসংক্ষেপ
                    </h2>
                    <p class="opacity-90">আপনার সম্পূর্ণ কর বিশ্লেষণ</p>
                </div>
                
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="text-center bg-white/10 rounded-2xl p-6 backdrop-blur-10">
                        <div class="feature-icon mx-auto mb-3">
                            <i class="fas fa-money-bill-wave text-3xl text-white"></i>
                        </div>
                        <div class="text-3xl font-bold mb-2" id="totalIncomeDisplay">৳০</div>
                        <div class="text-sm opacity-80">মোট আয়</div>
                        <div class="progress-bar-container mt-3">
                            <div class="progress-bar" id="totalIncomeProgress" style="width: 100%"></div>
                        </div>
                    </div>
                    
                    <div class="text-center bg-white/10 rounded-2xl p-6 backdrop-blur-10">
                        <div class="feature-icon mx-auto mb-3">
                            <i class="fas fa-calculator text-3xl text-white"></i>
                        </div>
                        <div class="text-3xl font-bold mb-2" id="taxableIncomeDisplay">৳০</div>
                        <div class="text-sm opacity-80">করযোগ্য আয়</div>
                        <div class="progress-bar-container mt-3">
                            <div class="progress-bar" id="taxableIncomeProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="text-center bg-white/10 rounded-2xl p-6 backdrop-blur-10">
                        <div class="feature-icon mx-auto mb-3">
                            <i class="fas fa-receipt text-3xl text-white"></i>
                        </div>
                        <div class="text-3xl font-bold mb-2" id="totalTaxDisplay">৳০</div>
                        <div class="text-sm opacity-80">মোট কর</div>
                        <div class="progress-bar-container mt-3">
                            <div class="progress-bar" id="totalTaxProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="text-center bg-white/10 rounded-2xl p-6 backdrop-blur-10">
                        <div class="feature-icon mx-auto mb-3">
                            <i class="fas fa-calendar-alt text-3xl text-white"></i>
                        </div>
                        <div class="text-3xl font-bold mb-2" id="monthlyTaxDisplay">৳০</div>
                        <div class="text-sm opacity-80">মাসিক কর</div>
                        <div class="progress-bar-container mt-3">
                            <div class="progress-bar" id="monthlyTaxProgress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tax Breakdown -->
            <div class="breakdown-card-gradient text-white rounded-3xl p-8 mb-8 animate-fadeInScale">
                <h3 class="text-2xl font-bold mb-6 flex items-center">
                    <i class="fas fa-chart-pie mr-3"></i>কর বিভাজন
                </h3>
                <div id="taxBreakdown" class="space-y-4"></div>
            </div>

            <!-- Detailed Analysis -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Monthly Analysis -->
                <div class="analysis-card-gradient text-white rounded-3xl p-8 animate-fadeInScale">
                    <h3 class="text-2xl font-bold mb-6 flex items-center">
                        <i class="fas fa-calendar-check mr-3"></i>মাসিক বিশ্লেষণ
                    </h3>
                    <div class="space-y-4">
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                            <div class="flex justify-between items-center">
                                <span class="opacity-80">মাসিক আয়</span>
                                <span class="text-xl font-bold" id="monthlyIncomeDisplay">৳০</span>
                            </div>
                        </div>
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                            <div class="flex justify-between items-center">
                                <span class="opacity-80">কর পরবর্তী আয়</span>
                                <span class="text-xl font-bold" id="afterTaxIncomeDisplay">৳০</span>
                            </div>
                        </div>
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                            <div class="flex justify-between items-center">
                                <span class="opacity-80">কর হার</span>
                                <span class="text-xl font-bold" id="taxPercentageDisplay">০%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Comparison with Others -->
                <div class="glass-card-solid rounded-3xl p-8 animate-fadeInScale">
                    <h3 class="text-2xl font-bold gradient-text mb-6 flex items-center">
                        <i class="fas fa-users mr-3"></i>তুলনামূলক বিশ্লেষণ
                    </h3>
                    <div class="space-y-4">
                        <div class="bg-blue-50 rounded-xl p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-semibold text-blue-700">আপনার কর হার</span>
                                <span class="text-lg font-bold text-blue-900" id="yourTaxRateComparison">০%</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="yourTaxRateBar" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 rounded-xl p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-semibold text-green-700">গড় কর হার (সাধারণ)</span>
                                <span class="text-lg font-bold text-green-900">১২%</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar bg-gradient-to-r from-green-400 to-green-600" style="width: 48%"></div>
                            </div>
                        </div>
                        
                        <div class="bg-purple-50 rounded-xl p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-semibold text-purple-700">সর্বোচ্চ কর হার</span>
                                <span class="text-lg font-bold text-purple-900">২৫%</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar bg-gradient-to-r from-purple-400 to-purple-600" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tax Saving Tips -->
            <div class="tips-card-gradient text-white rounded-3xl p-8 mb-8 animate-fadeInScale">
                <h3 class="text-2xl font-bold mb-6 flex items-center">
                    <i class="fas fa-lightbulb mr-3"></i>কর সাশ্রয়ের টিপস
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-bold text-lg mb-4">বিনিয়োগ সুবিধা:</h4>
                        <div class="space-y-3">
                            <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <span class="font-semibold">DPS/সঞ্চয়পত্র</span>
                                        <br><span class="text-sm opacity-80">সর্বোচ্চ সাশ্রয়</span>
                                    </div>
                                    <span class="text-xl font-bold">৳১,২৫,০০০</span>
                                </div>
                            </div>
                            
                            <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <span class="font-semibold">জীবন বীমা</span>
                                        <br><span class="text-sm opacity-80">বার্ষিক প্রিমিয়াম</span>
                                    </div>
                                    <span class="text-xl font-bold">৳১,০০,০০০</span>
                                </div>
                            </div>
                            
                            <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <span class="font-semibold">প্রভিডেন্ট ফান্ড</span>
                                        <br><span class="text-sm opacity-80">নিয়োগকর্তা কর্তৃক</span>
                                    </div>
                                    <span class="text-xl font-bold">৳১,২৫,০০০</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-bold text-lg mb-4">অন্যান্য ছাড়:</h4>
                        <div class="space-y-3">
                            <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <span class="font-semibold">দান</span>
                                        <br><span class="text-sm opacity-80">আয়ের শতাংশ</span>
                                    </div>
                                    <span class="text-xl font-bold">২০%</span>
                                </div>
                            </div>
                            
                            <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <span class="font-semibold">চিকিৎসা খরচ</span>
                                        <br><span class="text-sm opacity-80">প্রমাণপত্রসহ</span>
                                    </div>
                                    <span class="text-xl font-bold">যোগ্য</span>
                                </div>
                            </div>
                            
                            <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <span class="font-semibold">শিক্ষা খরচ</span>
                                        <br><span class="text-sm opacity-80">সন্তানদের জন্য</span>
                                    </div>
                                    <span class="text-xl font-bold">যোগ্য</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Potential Savings Calculator -->
                <div class="mt-8 bg-white/10 rounded-xl p-6 backdrop-blur-10">
                    <h4 class="font-bold text-lg mb-4 flex items-center">
                        <i class="fas fa-chart-line mr-2"></i>সম্ভাব্য কর সাশ্রয়
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold" id="maxPossibleSavings">৳০</div>
                            <div class="text-sm opacity-80">সর্বোচ্চ সাশ্রয়</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold" id="currentSavings">৳০</div>
                            <div class="text-sm opacity-80">বর্তমান সাশ্রয়</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold" id="additionalSavings">৳০</div>
                            <div class="text-sm opacity-80">অতিরিক্ত সম্ভাবনা</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Export & Share Options -->
            <div class="glass-card-solid rounded-3xl p-8 mb-8 animate-fadeInScale">
                <h3 class="text-2xl font-bold gradient-text mb-6 flex items-center">
                    <i class="fas fa-share-alt mr-3"></i>রিপোর্ট ও শেয়ার
                </h3>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="printResults()" 
                        class="flex flex-col items-center justify-center p-6 bg-blue-50 hover:bg-blue-100 rounded-xl transition-all duration-300 text-blue-700 font-semibold">
                        <i class="fas fa-print text-2xl mb-2"></i>
                        প্রিন্ট করুন
                    </button>
                    
                    <button onclick="exportToPDF()" 
                        class="flex flex-col items-center justify-center p-6 bg-red-50 hover:bg-red-100 rounded-xl transition-all duration-300 text-red-700 font-semibold">
                        <i class="fas fa-file-pdf text-2xl mb-2"></i>
                        PDF ডাউনলোড
                    </button>
                    
                    <button onclick="exportToCSV()" 
                        class="flex flex-col items-center justify-center p-6 bg-green-50 hover:bg-green-100 rounded-xl transition-all duration-300 text-green-700 font-semibold">
                        <i class="fas fa-file-csv text-2xl mb-2"></i>
                        CSV এক্সপোর্ট
                    </button>
                    
                    <button onclick="shareResults()" 
                        class="flex flex-col items-center justify-center p-6 bg-purple-50 hover:bg-purple-100 rounded-xl transition-all duration-300 text-purple-700 font-semibold">
                        <i class="fas fa-share text-2xl mb-2"></i>
                        শেয়ার করুন
                    </button>
                </div>
            </div>
        </div>

        <!-- Instructions & Help -->
        <div class="glass-card-solid rounded-3xl p-8 animate-slideInUp">
            <h3 class="text-2xl font-bold gradient-text mb-6 flex items-center">
                <i class="fas fa-question-circle mr-3"></i>ব্যবহারবিধি ও সাহায্য
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h4 class="font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-play-circle text-blue-500 mr-2"></i>
                        কিভাবে ব্যবহার করবেন:
                    </h4>
                    <div class="space-y-3">
                        <div class="flex items-start">
                            <div class="feature-icon mr-3 text-sm">1</div>
                            <p class="text-gray-700">প্রথমে আপনার করদাতার ধরন নির্বাচন করুন</p>
                        </div>
                        <div class="flex items-start">
                            <div class="feature-icon mr-3 text-sm">2</div>
                            <p class="text-gray-700">বার্ষিক আয়ের সব খাত সঠিকভাবে পূরণ করুন</p>
                        </div>
                        <div class="flex items-start">
                            <div class="feature-icon mr-3 text-sm">3</div>
                            <p class="text-gray-700">বিনিয়োগ ও সঞ্চয়ের তথ্য দিন কর সাশ্রয়ের জন্য</p>
                        </div>
                        <div class="flex items-start">
                            <div class="feature-icon mr-3 text-sm">4</div>
                            <p class="text-gray-700">স্বয়ংক্রিয়ভাবে কর গণনা ও রিপোর্ট দেখুন</p>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-exclamation-triangle text-orange-500 mr-2"></i>
                        গুরুত্বপূর্ণ তথ্য:
                    </h4>
                    <div class="space-y-3">
                        <div class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i>
                            <p class="text-gray-700">সব পরিমাণ বার্ষিক হিসাবে প্রদান করুন</p>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i>
                            <p class="text-gray-700">এটি একটি প্রাথমিক হিসাব ও নির্দেশনা</p>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i>
                            <p class="text-gray-700">চূড়ান্ত রিটার্নের জন্য কর পরামর্শক দেখান</p>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i>
                            <p class="text-gray-700">আপনার তথ্য সম্পূর্ণ নিরাপদ ও গোপনীয়</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- FAQ Section -->
            <div class="mt-8 pt-8 border-t border-gray-200">
                <h4 class="font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-question text-purple-500 mr-2"></i>
                    সচরাচর জিজ্ঞাসা (FAQ):
                </h4>
                
                <div class="space-y-4">
                    <div class="bg-gray-50 rounded-xl p-4">
                        <button class="w-full text-left font-semibold text-gray-800 flex items-center justify-between" onclick="toggleFAQ(1)">
                            <span>এই ক্যালকুলেটর কতটা নির্ভুল?</span>
                            <i class="fas fa-chevron-down" id="faqIcon1"></i>
                        </button>
                        <div id="faqAnswer1" class="hidden mt-3 text-gray-600">
                            এই ক্যালকুলেটর NBR এর সর্বশেষ নিয়ম অনুসারে তৈরি। তবে এটি একটি প্রাথমিক হিসাব। চূড়ান্ত কর নিরূপণের জন্য অবশ্যই কর পরামর্শকের সাহায্য নিন।
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 rounded-xl p-4">
                        <button class="w-full text-left font-semibold text-gray-800 flex items-center justify-between" onclick="toggleFAQ(2)">
                            <span>আমার তথ্য কি নিরাপদ?</span>
                            <i class="fas fa-chevron-down" id="faqIcon2"></i>
                        </button>
                        <div id="faqAnswer2" class="hidden mt-3 text-gray-600">
                            হ্যাঁ, সম্পূর্ণ নিরাপদ। এই ক্যালকুলেটর কোনো তথ্য সার্ভারে সংরক্ষণ করে না। সব গণনা আপনার ব্রাউজারেই হয়।
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 rounded-xl p-4">
                        <button class="w-full text-left font-semibold text-gray-800 flex items-center justify-between" onclick="toggleFAQ(3)">
                            <span>কর সাশ্রয়ের সর্বোচ্চ সীমা কত?</span>
                            <i class="fas fa-chevron-down" id="faqIcon3"></i>
                        </button>
                        <div id="faqAnswer3" class="hidden mt-3 text-gray-600">
                            মোট বিনিয়োগ রেবেট সর্বোচ্চ ১৫,০০,০০০ টাকা (DPS: ১,২৫,০০০ + বীমা: ১,০০,০০০ + PF: ১,২৫,০০০ + অন্যান্য: ৫০,০০০)।
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="mt-16 py-12 px-4 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20"></div>
        <div class="container mx-auto text-center relative z-10">
            <div class="glass-card text-white rounded-3xl p-8">
                <h3 class="text-3xl font-bold mb-6">🚀 আরও সেবা</h3>
                <p class="text-xl mb-6 opacity-90">
                    এই ক্যালকুলেটর সম্পূর্ণ ফ্রি এবং কোন তথ্য সংরক্ষণ করে না
                </p>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="text-center">
                        <div class="feature-icon mx-auto mb-2">
                            <i class="fas fa-mobile-alt text-2xl"></i>
                        </div>
                        <span class="text-sm">মোবাইল ফ্রেন্ডলি</span>
                    </div>
                    <div class="text-center">
                        <div class="feature-icon mx-auto mb-2">
                            <i class="fas fa-shield-alt text-2xl"></i>
                        </div>
                        <span class="text-sm">সম্পূর্ণ নিরাপদ</span>
                    </div>
                    <div class="text-center">
                        <div class="feature-icon mx-auto mb-2">
                            <i class="fas fa-bolt text-2xl"></i>
                        </div>
                        <span class="text-sm">দ্রুত ও নির্ভুল</span>
                    </div>
                    <div class="text-center">
                        <div class="feature-icon mx-auto mb-2">
                            <i class="fas fa-heart text-2xl"></i>
                        </div>
                        <span class="text-sm">সম্পূর্ণ ফ্রি</span>
                    </div>
                </div>
                
                <div class="pt-6 border-t border-white/20 text-sm opacity-75">
                    <p class="mb-2">© ২০২৪ বাংলাদেশ আয়কর ক্যালকুলেটর | NBR নিয়ম অনুসরণে তৈরি</p>
                    <p class="flex items-center justify-center">
                        <i class="fas fa-exclamation-triangle mr-2"></i>
                        <strong>দাবিত্যাগ:</strong> এটি একটি প্রাথমিক হিসাব। চূড়ান্ত কর নিরূপণের জন্য কর পরামর্শক বা NBR এর সাথে যোগাযোগ করুন।
                    </p>
                </div>
                
                <!-- Social Share -->
                <div class="mt-6 pt-6 border-t border-white/20">
                    <p class="mb-4 font-semibold">বন্ধুদের সাথে শেয়ার করুন:</p>
                    <div class="flex justify-center gap-4">
                        <button onclick="shareOnFacebook()" class="feature-icon bg-blue-600 hover:bg-blue-700">
                            <i class="fab fa-facebook-f text-white"></i>
                        </button>
                        <button onclick="shareOnTwitter()" class="feature-icon bg-sky-500 hover:bg-sky-600">
                            <i class="fab fa-twitter text-white"></i>
                        </button>
                        <button onclick="shareOnWhatsApp()" class="feature-icon bg-green-600 hover:bg-green-700">
                            <i class="fab fa-whatsapp text-white"></i>
                        </button>
                        <button onclick="shareByEmail()" class="feature-icon bg-gray-600 hover:bg-gray-700">
                            <i class="fas fa-envelope text-white"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Enhanced Tax Calculation System
        let taxpayerType = 'general';
        let calculationHistory = [];
        
        // Tax slabs for 2024-25 (in BDT)
        const taxSlabs = [
            { min: 0, max: 300000, rate: 0 },
            { min: 300001, max: 400000, rate: 5 },
            { min: 400001, max: 700000, rate: 10 },
            { min: 700001, max: 1100000, rate: 15 },
            { min: 1100001, max: 1600000, rate: 20 },
            { min: 1600001, max: Infinity, rate: 25 }
        ];
        
        // Tax-free limits based on taxpayer type
        const taxFreeLimits = {
            general: 350000,
            female: 400000,
            senior: 450000
        };
        
        // Maximum rebate limits
        const rebateLimits = {
            dps: 125000,
            lifeInsurance: 100000,
            providentFund: 125000,
            donation: 0.20, // 20% of income
            others: 50000
        };

        // Utility Functions
        function formatMoney(amount) {
            return new Intl.NumberFormat('bn-BD', {
                style: 'currency',
                currency: 'BDT',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount).replace('BDT', '৳');
        }

        function formatNumber(number) {
            return new Intl.NumberFormat('bn-BD').format(number);
        }

        function getInputValue(id) {
            const value = document.getElementById(id)?.value;
            return value ? parseFloat(value) : 0;
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = `notification show ${type}`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function updateTaxpayerType() {
            const selected = document.querySelector('input[name="taxpayerType"]:checked');
            if (selected) {
                taxpayerType = selected.value;
                
                // Update UI
                document.querySelectorAll('.taxpayer-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                const selectedCard = selected.parentElement.querySelector('.taxpayer-card');
                selectedCard.classList.add('selected');
                
                calculateTax();
                showNotification('করদাতার ধরন আপডেট হয়েছে!');
            }
        }

        function calculateTaxableIncome() {
            // Salary and allowances
            const basicSalary = getInputValue('basicSalary');
            const houseRent = getInputValue('houseRent');
            const medicalAllowance = getInputValue('medicalAllowance');
            const conveyanceAllowance = getInputValue('conveyanceAllowance');
            const bonus = getInputValue('bonus');
            const otherAllowance = getInputValue('otherAllowance');
            
            // Other income
            const businessIncome = getInputValue('businessIncome');
            const propertyIncome = getInputValue('propertyIncome');
            const bankInterest = getInputValue('bankInterest');
            
            // Calculate total gross income
            const totalGrossIncome = basicSalary + houseRent + medicalAllowance + 
                                   conveyanceAllowance + bonus + otherAllowance + 
                                   businessIncome + propertyIncome + bankInterest;
            
            // Allowance exemptions
            let exemptions = 0;
            
            // House rent exemption (50% of basic or actual, whichever is less)
            const houseRentExemption = Math.min(houseRent, basicSalary * 0.5);
            exemptions += houseRentExemption;
            
            // Medical allowance exemption (max 120,000 or 10% of basic, whichever is higher)
            const medicalExemption = Math.min(medicalAllowance, Math.max(120000, basicSalary * 0.1));
            exemptions += medicalExemption;
            
            // Conveyance allowance exemption (max 30,000)
            const conveyanceExemption = Math.min(conveyanceAllowance, 30000);
            exemptions += conveyanceExemption;
            
            // Calculate net income after exemptions
            const netIncomeAfterExemptions = totalGrossIncome - exemptions;
            
            // Investment rebates
            const dpsInvestment = getInputValue('dpsInvestment');
            const lifeInsurance = getInputValue('lifeInsurance');
            const providentFund = getInputValue('providentFund');
            const donation = getInputValue('donation');
            
            const dpsRebate = Math.min(dpsInvestment, rebateLimits.dps);
            const lifeInsuranceRebate = Math.min(lifeInsurance, rebateLimits.lifeInsurance);
            const providentFundRebate = Math.min(providentFund, rebateLimits.providentFund);
            const donationRebate = Math.min(donation, totalGrossIncome * rebateLimits.donation);
            
            const totalInvestmentRebate = dpsRebate + lifeInsuranceRebate + providentFundRebate + donationRebate;
            
            // Calculate taxable income
            const taxFreeLimit = taxFreeLimits[taxpayerType];
            const taxableIncome = Math.max(0, netIncomeAfterExemptions - totalInvestmentRebate - taxFreeLimit);
            
            return {
                totalGrossIncome,
                exemptions: {
                    houseRent: houseRentExemption,
                    medical: medicalExemption,
                    conveyance: conveyanceExemption,
                    total: exemptions
                },
                netIncomeAfterExemptions,
                investmentRebate: {
                    dps: dpsRebate,
                    lifeInsurance: lifeInsuranceRebate,
                    providentFund: providentFundRebate,
                    donation: donationRebate,
                    total: totalInvestmentRebate
                },
                taxFreeLimit,
                taxableIncome
            };
        }

        function calculateTaxOnIncome(taxableIncome) {
            let totalTax = 0;
            let taxBreakdown = [];
            
            for (const slab of taxSlabs) {
                if (taxableIncome <= slab.min) break;
                
                const taxableInThisSlab = Math.min(taxableIncome, slab.max) - slab.min + 1;
                const taxInThisSlab = taxableInThisSlab * slab.rate / 100;
                
                if (taxInThisSlab > 0) {
                    totalTax += taxInThisSlab;
                    taxBreakdown.push({
                        range: `${formatNumber(slab.min + 1)} - ${slab.max === Infinity ? 'উর্ধ্বে' : formatNumber(slab.max)}`,
                        rate: slab.rate,
                        taxableAmount: taxableInThisSlab,
                        tax: taxInThisSlab
                    });
                }
            }
            
            return { totalTax, taxBreakdown };
        }

        function updateProgressBars(incomeData, taxData) {
            const maxIncome = Math.max(incomeData.totalGrossIncome, 5000000); // 50 lakh as max for progress
            
            document.getElementById('totalIncomeProgress').style.width = '100%';
            document.getElementById('taxableIncomeProgress').style.width = 
                incomeData.totalGrossIncome > 0 ? (incomeData.taxableIncome / incomeData.totalGrossIncome * 100) + '%' : '0%';
            document.getElementById('totalTaxProgress').style.width = 
                (taxData.totalTax / maxIncome * 100) + '%';
            document.getElementById('monthlyTaxProgress').style.width = 
                (taxData.totalTax / 12 / (maxIncome / 12) * 100) + '%';
        }

        function calculateSavingsPotential(incomeData) {
            const currentRebate = incomeData.investmentRebate.total;
            const maxPossibleRebate = rebateLimits.dps + rebateLimits.lifeInsurance + 
                                    rebateLimits.providentFund + rebateLimits.others +
                                    (incomeData.totalGrossIncome * rebateLimits.donation);
            const additionalSavings = maxPossibleRebate - currentRebate;
            
            return {
                maxPossible: maxPossibleRebate,
                current: currentRebate,
                additional: Math.max(0, additionalSavings)
            };
        }

        function calculateTax() {
            // Check if taxpayer type is selected
            if (!document.querySelector('input[name="taxpayerType"]:checked')) {
                document.getElementById('resultsSection').classList.add('hidden');
                return;
            }

            const incomeData = calculateTaxableIncome();
            const taxData = calculateTaxOnIncome(incomeData.taxableIncome);
            const savingsData = calculateSavingsPotential(incomeData);
            
            // Display main results
            document.getElementById('totalIncomeDisplay').textContent = formatMoney(incomeData.totalGrossIncome);
            document.getElementById('taxableIncomeDisplay').textContent = formatMoney(incomeData.taxableIncome);
            document.getElementById('totalTaxDisplay').textContent = formatMoney(taxData.totalTax);
            document.getElementById('monthlyTaxDisplay').textContent = formatMoney(taxData.totalTax / 12);
            
            // Monthly analysis
            const monthlyIncome = incomeData.totalGrossIncome / 12;
            const monthlyTax = taxData.totalTax / 12;
            const afterTaxMonthlyIncome = monthlyIncome - monthlyTax;
            const taxPercentage = incomeData.totalGrossIncome > 0 ? 
                (taxData.totalTax / incomeData.totalGrossIncome * 100) : 0;
            
            document.getElementById('monthlyIncomeDisplay').textContent = formatMoney(monthlyIncome);
            document.getElementById('afterTaxIncomeDisplay').textContent = formatMoney(afterTaxMonthlyIncome);
            document.getElementById('taxPercentageDisplay').textContent = taxPercentage.toFixed(2) + '%';
            
            // Comparison data
            document.getElementById('yourTaxRateComparison').textContent = taxPercentage.toFixed(1) + '%';
            document.getElementById('yourTaxRateBar').style.width = (taxPercentage * 4) + '%'; // Scale for visualization
            
            // Savings potential
            document.getElementById('maxPossibleSavings').textContent = formatMoney(savingsData.maxPossible);
            document.getElementById('currentSavings').textContent = formatMoney(savingsData.current);
            document.getElementById('additionalSavings').textContent = formatMoney(savingsData.additional);
            
            // Tax breakdown
            const breakdownHTML = taxData.taxBreakdown.map(item => `
                <div class="bg-white/10 rounded-xl p-4 backdrop-blur-10">
                    <div class="flex justify-between items-center">
                        <div>
                            <div class="font-semibold">৳${item.range}</div>
                            <div class="text-sm opacity-80">${item.rate}% হারে • করযোগ্য: ${formatMoney(item.taxableAmount)}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-xl font-bold">${formatMoney(item.tax)}</div>
                            <div class="text-xs opacity-80">কর পরিমাণ</div>
                        </div>
                    </div>
                    <div class="progress-bar-container mt-2">
                        <div class="progress-bar" style="width: ${taxData.totalTax > 0 ? (item.tax / taxData.totalTax * 100) : 0}%"></div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('taxBreakdown').innerHTML = breakdownHTML || 
                '<div class="text-center py-8 bg-white/10 rounded-xl backdrop-blur-10"><i class="fas fa-smile text-4xl mb-4"></i><br>অভিনন্দন! কোন কর প্রযোজ্য নয়</div>';
            
            // Update progress bars
            updateProgressBars(incomeData, taxData);
            
            // Show results section with animation
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.classList.remove('hidden');
            
            // Add to calculation history
            calculationHistory.push({
                timestamp: new Date(),
                taxpayerType,
                incomeData,
                taxData,
                savingsData
            });
            
            // Smooth scroll to results
            setTimeout(() => {
                resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                showNotification('কর গণনা সফলভাবে সম্পন্ন হয়েছে!');
            }, 300);
        }

        // Helper Functions
        function clearAll() {
            const inputs = document.querySelectorAll('input[type="number"]');
            inputs.forEach(input => input.value = '');
            
            const radios = document.querySelectorAll('input[type="radio"]');
            radios.forEach(radio => radio.checked = false);
            
            document.querySelectorAll('.taxpayer-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            document.getElementById('resultsSection').classList.add('hidden');
            showNotification('সব তথ্য মুছে ফেলা হয়েছে!', 'info');
        }

        function fillSampleData() {
            // Set sample taxpayer type
            document.querySelector('input[name="taxpayerType"][value="general"]').checked = true;
            updateTaxpayerType();
            
            // Fill sample data
            document.getElementById('basicSalary').value = '600000';
            document.getElementById('houseRent').value = '180000';
            document.getElementById('medicalAllowance').value = '60000';
            document.getElementById('conveyanceAllowance').value = '24000';
            document.getElementById('bonus').value = '100000';
            document.getElementById('businessIncome').value = '50000';
            document.getElementById('propertyIncome').value = '30000';
            document.getElementById('bankInterest').value = '20000';
            document.getElementById('dpsInvestment').value = '100000';
            document.getElementById('lifeInsurance').value = '50000';
            document.getElementById('providentFund').value = '75000';
            document.getElementById('donation').value = '25000';
            
            calculateTax();
            showNotification('নমুনা ডেটা লোড করা হয়েছে!');
        }

        function saveData() {
            const formData = {};
            const inputs = document.querySelectorAll('input');
            
            inputs.forEach(input => {
                if (input.type === 'number' || input.type === 'radio') {
                    if (input.type === 'radio' && input.checked) {
                        formData[input.name] = input.value;
                    } else if (input.type === 'number' && input.value) {
                        formData[input.id] = input.value;
                    }
                }
            });
            
            localStorage.setItem('taxCalculatorData', JSON.stringify(formData));
            showNotification('তথ্য সংরক্ষিত হয়েছে!');
        }

        function loadData() {
            const savedData = localStorage.getItem('taxCalculatorData');
            if (savedData) {
                const formData = JSON.parse(savedData);
                
                Object.keys(formData).forEach(key => {
                    const input = document.getElementById(key) || document.querySelector(`input[name="${key}"]`);
                    if (input) {
                        if (input.type === 'radio' && input.value === formData[key]) {
                            input.checked = true;
                            updateTaxpayerType();
                        } else if (input.type === 'number') {
                            input.value = formData[key];
                        }
                    }
                });
                
                calculateTax();
            }
        }

        // Export Functions
        function printResults() {
            window.print();
        }

        function exportToPDF() {
            showNotification('PDF এক্সপোর্ট শীঘ্রই আসছে!', 'info');
        }

        function exportToCSV() {
            if (!document.querySelector('input[name="taxpayerType"]:checked')) {
                showNotification('প্রথমে কর গণনা করুন!', 'error');
                return;
            }
            
            const incomeData = calculateTaxableIncome();
            const taxData = calculateTaxOnIncome(incomeData.taxableIncome);
            
            const csvContent = [
                'বিবরণ,পরিমাণ (টাকা)',
                `মোট আয়,${incomeData.totalGrossIncome}`,
                `করযোগ্য আয়,${incomeData.taxableIncome}`,
                `মোট কর,${taxData.totalTax}`,
                `মাসিক কর,${(taxData.totalTax / 12).toFixed(2)}`,
                `কর হার,${(taxData.totalTax / incomeData.totalGrossIncome * 100).toFixed(2)}%`,
                `করদাতার ধরন,${taxpayerType === 'general' ? 'সাধারণ' : taxpayerType === 'female' ? 'মহিলা' : 'প্রবীণ'}`
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'আয়কর_হিসাব_' + new Date().getFullYear() + '.csv';
            link.click();
            
            showNotification('CSV ফাইল ডাউনলোড শুরু হয়েছে!');
        }

        function shareResults() {
            if (!document.querySelector('input[name="taxpayerType"]:checked')) {
                showNotification('প্রথমে কর গণনা করুন!', 'error');
                return;
            }
            
            const totalTax = document.getElementById('totalTaxDisplay').textContent;
            const monthlyTax = document.getElementById('monthlyTaxDisplay').textContent;
            const taxPercentage = document.getElementById('taxPercentageDisplay').textContent;
            
            const shareText = `🇧🇩 আমার আয়কর হিসাব:\n\n💰 বার্ষিক কর: ${totalTax}\n📅 মাসিক কর: ${monthlyTax}\n📊 কর হার: ${taxPercentage}\n\n✨ বাংলাদেশ আয়কর ক্যালকুলেটর ব্যবহার করে হিসাব করেছি।`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'আয়কর ক্যালকুলেশন',
                    text: shareText
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    showNotification('ফলাফল ক্লিপবোর্ডে কপি হয়েছে!');
                });
            }
        }

        // Social sharing functions
        function shareOnFacebook() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('বাংলাদেশ আয়কর ক্যালকুলেটর - সম্পূর্ণ ফ্রি');
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
        }

        function shareOnTwitter() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('বাংলাদেশ আয়কর ক্যালকুলেটর ব্যবহার করুন - সম্পূর্ণ ফ্রি ও নিরাপদ');
            window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank');
        }

        function shareOnWhatsApp() {
            const text = encodeURIComponent('বাংলাদেশ আয়কর ক্যালকুলেটর ব্যবহার করুন: ' + window.location.href);
            window.open(`https://wa.me/?text=${text}`, '_blank');
        }

        function shareByEmail() {
            const subject = encodeURIComponent('বাংলাদেশ আয়কর ক্যালকুলেটর');
            const body = encodeURIComponent(`এই দুর্দান্ত আয়কর ক্যালকুলেটরটি দেখুন:\n\n${window.location.href}\n\nসম্পূর্ণ ফ্রি, নিরাপদ এবং NBR নিয়ম অনুযায়ী তৈরি।`);
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }

        // FAQ Functions
        function toggleFAQ(number) {
            const answer = document.getElementById(`faqAnswer${number}`);
            const icon = document.getElementById(`faqIcon${number}`);
            
            if (answer.classList.contains('hidden')) {
                answer.classList.remove('hidden');
                icon.classList.add('fa-chevron-up');
                icon.classList.remove('fa-chevron-down');
            } else {
                answer.classList.add('hidden');
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        }

        // Scroll to top function
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved data
            loadData();
            
            // Add auto-save functionality
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('input', debounce(saveData, 2000));
            });
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    calculateTax();
                } else if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    saveData();
                } else if (e.key === 'Escape') {
                    document.getElementById('resultsSection').classList.add('hidden');
                }
            });
            
            console.log('🎉 বাংলাদেশ আয়কর ক্যালকুলেটর সফলভাবে লোড হয়েছে!');
            showNotification('ক্যালকুলেটর প্রস্তুত! করদাতার ধরন নির্বাচন করুন।', 'info');
        });

        // Debounce function for auto-save
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
</body>
</html>
